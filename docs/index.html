<!DOCTYPE HTML>
<!-- Derived from Story by HTML5 UP | html5up.net | @ajlkn | Free for personal and commercial use under the CCA 3.0 license (html5up.net/license) -->
<html>
<head>
<title>r-ci</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<link rel="stylesheet" href="https://eddelbuettel.github.io/html5-story/assets/css/main.css" />
<noscript><link rel="stylesheet" href="https://eddelbuettel.github.io/html5-story/assets/css/noscript.css" /></noscript>
</head>
<body class="is-preload">

<!-- Wrapper -->
<div id="wrapper" class="divided">

<!-- One -->
<section class="banner style1 orient-left content-align-left image-position-right fullscreen onload-image-fade-in onload-content-fade-right">
<div class="content">
  <header>
  <h2><code>r-ci</code></h2>
  <p>Easy and portable CI for R packages</p>
  </header>
  <p class="major">
  This repository provides the script <code>run.sh</code> for portable, flexible and lightweight use of Continuous Integration at Travis, GitHub Actions, Azure Pipelines and possibly others.
  </p>
  <p class="major">
  This script contains the following key functions which are typically all a user needs to call:
  </p>
  <dl>
    <dt><code>./run.sh bootstrap</code></dt>
    <dd><p>Sets up the R environment, installs auxiliary packages such as <code>testthat</code> or <code>tinytest</code>.</p></dd>

    <dt><code>./run.sh install_all</code></dt>
    <dd><p>Parses <code>DESCRIPTION</code> and installs the required (and suggested) packages. <code>install_deps</code> is a lighterweight alternative.</p></dd>

    <dt><code>./run.sh run_tests</code></dt>
    <dd><p>Builds the package tarball, and runs tests on it.</p></dd>
  </dl>
  <ul class="actions stacked">
    <li><a href="#first" class="button big wide smooth-scroll-middle">See below for Travis and GH Actions</a></li>
  </ul>
</div>
<div class="image">
  <img src="https://eddelbuettel.github.io/html5-story/extra/building-1989816_1920.jpg" alt="" /> 
</div>
</section>

<!-- Two -->
<section class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in" id="first">
<div class="content content-align-left">
  <h3>Use with Travis CI</h3>
  <p>Travis CI continues to be useful even if there is some current uncertainty about billing and pricing (particular on macOS). Basic use by Open Source project on Linux should be unaffected.</p>

  <p>The following code examples is an <strong>actual</strong> file <code>.travis.yml</code> from the <a  href="https://github.com/eddelbuettel/dang">dang</a> repository.
  It runs a simple <em>matrix</em> build over macOS and Linux.
  
<pre><code>
# Run CI for R using https://eddelbuettel.github.io/r-ci/

language: c
sudo: required
dist: focal

jobs:
  include:
    - name: linux
      os: linux
    - name: macOS
      os: osx

## Two core settings: BSPM for binary installation where possible, and no
## installation of 'Suggests:' to keep things lighter
env:
  global:
    - _R_CHECK_FORCE_SUGGESTS_="false"
      USE_BSPM="true"
    
before_install:
  - curl -OLs https://eddelbuettel.github.io/r-travis/run.sh
  - chmod 0755 run.sh
  - ./run.sh bootstrap

install:
  - ./run.sh install_all

script:
  - ./run.sh run_tests

after_failure:
  - ./run.sh dump_logs
 
#after_success:
#  - ./run.sh coverage

notifications:
  email:
    on_success: change
    on_failure: change
</code></pre>

  <!-- <ul class="actions stacked"> -->
  <!--   <li><a href="#" class="button">Learn More</a></li> -->
  <!-- </ul> -->
</div>
<div class="image">
  <img src="https://eddelbuettel.github.io/html5-story/extra/london-3833039_1920.jpg" alt="" />
</div>
</section>

<!-- Three -->
<section class="spotlight style1 orient-left content-align-left image-position-center onscroll-image-fade-in">
<div class="content content-align-left">
  <h3>Use with GitHub Actions</h3>
  <p>GitHub Actions is the <em>flavour of the day</em> right now with fairly unlimited build resources, along with the
  rather stunning own-goal scored by the incument. In any event, usage is <strong>easy</strong>. Just commit any file
  ending in <code>.yml</code> or <code>.yaml</code> in a directory <code>.github/workflows</code> within your GitHub
  repo---and you are all set. Here is my (currently) most recent example <code>.github/workflows/ci.yaml</code> from the
  <a href="https://github.com/eddelbuettel/inline">inline</a> repository. Note that the matrix build for macOS is turned
  off as the package requires working Fortran support on each OS..

<pre><code>
# Run CI for R using https://eddelbuettel.github.io/r-ci/

name: ci

on:
  push:
  pull_request:

env:
  USE_BSPM: "true"
  _R_CHECK_FORCE_SUGGESTS_: "false"

jobs:
  build:
    strategy:
      matrix:
        config:
          #- {os: macOS-latest}
          - {os: ubuntu-latest}

    runs-on: ${{ matrix.config.os }}

    steps:
      - uses: actions/checkout@v2

      - name: Bootstrap
        run: |
          curl -OLs https://eddelbuettel.github.io/r-travis/run.sh
          chmod 0755 run.sh
          ./run.sh bootstrap

      - name: Dependencies
        run: ./run.sh install_all

      - name: Test
        run: ./run.sh run_tests

</code></pre>
  
  <!-- <ul class="actions stacked"> -->
  <!--   <li><a href="#" class="button">Learn More</a></li> -->
  <!-- </ul> -->
</div>
<div class="image">
  <img src="https://eddelbuettel.github.io/html5-story/extra/surface-945444_1920.jpg" alt="" />
</div>
</section>

<!-- <\!-- Four -\-> -->
<!-- <section class="spotlight style1 orient-right content-align-left image-position-center onscroll-image-fade-in"> -->
<!-- <div class="content"> -->
<!--   <h2>Pharetra etiam nulla</h2> -->
<!--   <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi id ante sed ex pharetra lacinia sit amet vel massa. Donec facilisis laoreet nulla eu bibendum. Donec ut ex risus. Fusce lorem lectus, pharetra pretium massa et, hendrerit vestibulum odio lorem ipsum dolor sit amet.</p> -->
<!--   <ul class="actions stacked"> -->
<!--     <li><a href="#" class="button">Learn More</a></li> -->
<!--   </ul> -->
<!-- </div> -->
<!-- <div class="image"> -->
<!--   <img src="https://eddelbuettel.github.io/html5-story/images/spotlight03.jpg" alt="" /> -->
<!-- </div> -->
<!-- </section> -->

<!-- <\!-- Five -\-> -->
<!-- <section class="wrapper style1 align-center"> -->
<!-- <div class="inner"> -->
<!--   <h2>Massa sed condimentum</h2> -->
<!--   <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi id ante sed ex pharetra lacinia sit amet vel massa. Donec facilisis laoreet nulla eu bibendum. Donec ut ex risus. Fusce lorem lectus, pharetra pretium massa et, hendrerit vestibulum odio lorem ipsum.</p> -->
<!-- </div> -->

<!-- <\!-- Gallery -\-> -->
<!-- <div class="gallery style2 medium lightbox onscroll-fade-in"> -->
<!--   <article> -->
<!--   <a href="images/gallery/fulls/01.jpg" class="image"> -->
<!--   <img src="images/gallery/thumbs/01.jpg" alt="" /> -->
<!--   </a> -->
<!-- <div class="caption"> -->
<!--   <h3>Ipsum Dolor</h3> -->
<!--   <p>Lorem ipsum dolor amet, consectetur magna etiam elit. Etiam sed ultrices.</p> -->
<!--   <ul class="actions fixed"> -->
<!--     <li><span class="button small">Details</span></li> -->
<!--   </ul> -->
<!-- </div> -->
<!-- </article> -->
<!-- <article> -->
<!-- <a href="images/gallery/fulls/02.jpg" class="image"> -->
<!-- <img src="images/gallery/thumbs/02.jpg" alt="" /> -->
<!-- </a> -->
<!-- <div class="caption"> -->
<!--   <h3>Feugiat Lorem</h3> -->
<!--   <p>Lorem ipsum dolor amet, consectetur magna etiam elit. Etiam sed ultrices.</p> -->
<!--   <ul class="actions fixed"> -->
<!--     <li><span class="button small">Details</span></li> -->
<!--   </ul> -->
<!-- </div> -->
<!-- </article> -->
<!-- <article> -->
<!-- <a href="images/gallery/fulls/03.jpg" class="image"> -->
<!-- <img src="images/gallery/thumbs/03.jpg" alt="" /> -->
<!-- </a> -->
<!-- <div class="caption"> -->
<!--   <h3>Magna Amet</h3> -->
<!--   <p>Lorem ipsum dolor amet, consectetur magna etiam elit. Etiam sed ultrices.</p> -->
<!--   <ul class="actions fixed"> -->
<!--     <li><span class="button small">Details</span></li> -->
<!--   </ul> -->
<!-- </div> -->
<!-- </article> -->
<!-- <article> -->
<!-- <a href="images/gallery/fulls/04.jpg" class="image"> -->
<!-- <img src="images/gallery/thumbs/04.jpg" alt="" /> -->
<!-- </a> -->
<!-- <div class="caption"> -->
<!--   <h3>Sed Tempus</h3> -->
<!--   <p>Lorem ipsum dolor amet, consectetur magna etiam elit. Etiam sed ultrices.</p> -->
<!--   <ul class="actions fixed"> -->
<!--     <li><span class="button small">Details</span></li> -->
<!--   </ul> -->
<!-- </div> -->
<!-- </article> -->
<!-- <article> -->
<!-- <a href="images/gallery/fulls/05.jpg" class="image"> -->
<!-- <img src="images/gallery/thumbs/05.jpg" alt="" /> -->
<!-- </a> -->
<!-- <div class="caption"> -->
<!--   <h3>Ultrices Magna</h3> -->
<!--   <p>Lorem ipsum dolor amet, consectetur magna etiam elit. Etiam sed ultrices.</p> -->
<!--   <ul class="actions fixed"> -->
<!--     <li><span class="button small">Details</span></li> -->
<!--   </ul> -->
<!-- </div> -->
<!-- </article> -->
<!-- <article> -->
<!-- <a href="images/gallery/fulls/06.jpg" class="image"> -->
<!-- <img src="images/gallery/thumbs/06.jpg" alt="" /> -->
<!-- </a> -->
<!-- <div class="caption"> -->
<!--   <h3>Sed Tempus</h3> -->
<!--   <p>Lorem ipsum dolor amet, consectetur magna etiam elit. Etiam sed ultrices.</p> -->
<!--   <ul class="actions fixed"> -->
<!--     <li><span class="button small">Details</span></li> -->
<!--   </ul> -->
<!-- </div> -->
<!-- </article> -->
<!-- <article> -->
<!-- <a href="images/gallery/fulls/07.jpg" class="image"> -->
<!-- <img src="images/gallery/thumbs/07.jpg" alt="" /> -->
<!-- </a> -->
<!-- <div class="caption"> -->
<!--   <h3>Ipsum Lorem</h3> -->
<!--   <p>Lorem ipsum dolor amet, consectetur magna etiam elit. Etiam sed ultrices.</p> -->
<!--   <ul class="actions fixed"> -->
<!--     <li><span class="button small">Details</span></li> -->
<!--   </ul> -->
<!-- </div> -->
<!-- </article> -->
<!-- <article> -->
<!-- <a href="images/gallery/fulls/08.jpg" class="image"> -->
<!-- <img src="images/gallery/thumbs/08.jpg" alt="" /> -->
<!-- </a> -->
<!-- <div class="caption"> -->
<!--   <h3>Magna Risus</h3> -->
<!--   <p>Lorem ipsum dolor amet, consectetur magna etiam elit. Etiam sed ultrices.</p> -->
<!--   <ul class="actions fixed"> -->
<!--     <li><span class="button small">Details</span></li> -->
<!--   </ul> -->
<!-- </div> -->
<!-- </article> -->
<!-- <article> -->
<!-- <a href="images/gallery/fulls/09.jpg" class="image"> -->
<!-- <img src="images/gallery/thumbs/09.jpg" alt="" /> -->
<!-- </a> -->
<!-- <div class="caption"> -->
<!--   <h3>Tempus Dolor</h3> -->
<!--   <p>Lorem ipsum dolor amet, consectetur magna etiam elit. Etiam sed ultrices.</p> -->
<!--   <ul class="actions fixed"> -->
<!--     <li><span class="button small">Details</span></li> -->
<!--   </ul> -->
<!-- </div> -->
<!-- </article> -->
<!-- <article> -->
<!-- <a href="images/gallery/fulls/10.jpg" class="image"> -->
<!-- <img src="images/gallery/thumbs/10.jpg" alt="" /> -->
<!-- </a> -->
<!-- <div class="caption"> -->
<!--   <h3>Sed Etiam</h3> -->
<!--   <p>Lorem ipsum dolor amet, consectetur magna etiam elit. Etiam sed ultrices.</p> -->
<!--   <ul class="actions fixed"> -->
<!--     <li><span class="button small">Details</span></li> -->
<!--   </ul> -->
<!-- </div> -->
<!-- </article> -->
<!-- <article> -->
<!-- <a href="images/gallery/fulls/11.jpg" class="image"> -->
<!-- <img src="images/gallery/thumbs/11.jpg" alt="" /> -->
<!-- </a> -->
<!-- <div class="caption"> -->
<!--   <h3>Magna Lorem</h3> -->
<!--   <p>Lorem ipsum dolor amet, consectetur magna etiam elit. Etiam sed ultrices.</p> -->
<!--   <ul class="actions fixed"> -->
<!--     <li><span class="button small">Details</span></li> -->
<!--   </ul> -->
<!-- </div> -->
<!-- </article> -->
<!-- <article> -->
<!-- <a href="images/gallery/fulls/12.jpg" class="image"> -->
<!-- <img src="images/gallery/thumbs/12.jpg" alt="" /> -->
<!-- </a> -->
<!-- <div class="caption"> -->
<!--   <h3>Ipsum Dolor</h3> -->
<!--   <p>Lorem ipsum dolor amet, consectetur magna etiam elit. Etiam sed ultrices.</p> -->
<!--   <ul class="actions fixed"> -->
<!--     <li><span class="button small">Details</span></li> -->
<!--   </ul> -->
<!-- </div> -->
<!-- </article> -->
<!-- </div> -->

<!-- </section> -->

<!-- <\!-- Six -\-> -->
<!-- <section class="wrapper style1 align-center"> -->
<!-- <div class="inner"> -->
<!--   <h2>Ipsum sed consequat</h2> -->
<!--   <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi id ante sed ex pharetra lacinia sit amet vel massa. Donec facilisis laoreet nulla eu bibendum. Donec ut ex risus. Fusce lorem lectus, pharetra pretium massa et, hendrerit vestibulum odio lorem ipsum.</p> -->
<!-- <div class="items style1 medium onscroll-fade-in"> -->
<!--   <section> -->
<!--   <span class="icon style2 major fa-gem"></span> -->
<!--   <h3>Lorem</h3> -->
<!--   <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper. Etiam eget ultrices risus nec tempor elit.</p> -->
<!--   </section> -->
<!--   <section> -->
<!--   <span class="icon solid style2 major fa-save"></span> -->
<!--   <h3>Ipsum</h3> -->
<!--   <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper. Etiam eget ultrices risus nec tempor elit.</p> -->
<!--   </section> -->
<!--   <section> -->
<!--   <span class="icon solid style2 major fa-chart-bar"></span> -->
<!--   <h3>Dolor</h3> -->
<!--   <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper. Etiam eget ultrices risus nec tempor elit.</p> -->
<!--   </section> -->
<!--   <section> -->
<!--   <span class="icon solid style2 major fa-wifi"></span> -->
<!--   <h3>Amet</h3> -->
<!--   <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper. Etiam eget ultrices risus nec tempor elit.</p> -->
<!--   </section> -->
<!--   <section> -->
<!--   <span class="icon solid style2 major fa-cog"></span> -->
<!--   <h3>Magna</h3> -->
<!--   <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper. Etiam eget ultrices risus nec tempor elit.</p> -->
<!--   </section> -->
<!--   <section> -->
<!--   <span class="icon style2 major fa-paper-plane"></span> -->
<!--   <h3>Tempus</h3> -->
<!--   <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper. Etiam eget ultrices risus nec tempor elit.</p> -->
<!--   </section> -->
<!--   <section> -->
<!--   <span class="icon solid style2 major fa-desktop"></span> -->
<!--   <h3>Aliquam</h3> -->
<!--   <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper. Etiam eget ultrices risus nec tempor elit.</p> -->
<!--   </section> -->
<!--   <section> -->
<!--   <span class="icon solid style2 major fa-sync-alt"></span> -->
<!-- <h3>Elit</h3> -->
<!-- <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper. Etiam eget ultrices risus nec tempor elit.</p> -->
<!-- </section> -->
<!-- <section> -->
<!-- <span class="icon solid style2 major fa-hashtag"></span> -->
<!-- <h3>Morbi</h3> -->
<!-- <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper. Etiam eget ultrices risus nec tempor elit.</p> -->
<!-- </section> -->
<!-- <section> -->
<!-- <span class="icon solid style2 major fa-bolt"></span> -->
<!-- <h3>Turpis</h3> -->
<!-- <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper. Etiam eget ultrices risus nec tempor elit.</p> -->
<!-- </section> -->
<!-- <section> -->
<!-- <span class="icon solid style2 major fa-envelope"></span> -->
<!-- <h3>Ultrices</h3> -->
<!-- <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper. Etiam eget ultrices risus nec tempor elit.</p> -->
<!-- </section> -->
<!-- <section> -->
<!-- <span class="icon solid style2 major fa-leaf"></span> -->
<!-- <h3>Risus</h3> -->
<!-- <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dui turpis, cursus eget orci amet aliquam congue semper. Etiam eget ultrices risus nec tempor elit.</p> -->
<!-- </section> -->
<!-- </div> -->
<!-- </div> -->
<!-- </section> -->

<!-- <\!-- Seven -\-> -->
<!-- <section class="wrapper style1 align-center"> -->
<!-- <div class="inner medium"> -->
<!--   <h2>Get in touch</h2> -->
<!--   <form method="post" action="#"> -->
<!-- <div class="fields"> -->
<!-- <div class="field half"> -->
<!--   <label for="name">Name</label> -->
<!--   <input type="text" name="name" id="name" value="" /> -->
<!-- </div> -->
<!-- <div class="field half"> -->
<!--   <label for="email">Email</label> -->
<!--   <input type="email" name="email" id="email" value="" /> -->
<!-- </div> -->
<!-- <div class="field"> -->
<!--   <label for="message">Message</label> -->
<!--   <textarea name="message" id="message" rows="6"></textarea> -->
<!-- </div> -->
<!-- </div> -->
<!-- <ul class="actions special"> -->
<!--   <li><input type="submit" name="submit" id="submit" value="Send Message" /></li> -->
<!-- </ul> -->
<!-- </form> -->

<!-- </div> -->
<!-- </section> -->

<!-- Footer -->
<footer class="wrapper style1 align-center">
<div class="inner">
  <ul class="icons">
    <li><a href="https://github.com/eddelbuettel" class="icon brands style1 fa-github"><span class="label">GitHub</span></a></li> 
    <li><a href="https://twitter.com/eddelbuettel" class="icon brands style1 fa-twitter"><span class="label">Twitter</span></a></li>
    <!-- <li><a href="#" class="icon brands style1 fa-facebook-f"><span class="label">Facebook</span></a></li> -->
    <!-- <li><a href="#" class="icon brands style1 fa-instagram"><span class="label">Instagram</span></a></li> -->
    <li><a href="https://www.linkedin.com/in/dirkeddelbuettel/" class="icon brands style1 fa-linkedin-in"><span class="label">LinkedIn</span></a></li>
    <li><a href="mailto:dirk@eddelbuettel.com" class="icon style1 fa-envelope"><span class="label">Email</span></a></li>
  </ul>
  <p>
   Website based on Story which is &copy; Untitled and part of <a href="https://html5up.net">HTML5 UP</a>.
   Photos from <a href="https://pixabay.com">pixabay</a> with <a href="https://github.com/eddelbuettel/html5-story/blob/master/extra/credits.md">explicit credits here</a>.
  </p>
</div>
</footer>

</div>

<!-- Scripts -->
<script src="https://eddelbuettel.github.io/html5-story/assets/js/jquery.min.js"></script>
<script src="https://eddelbuettel.github.io/html5-story/assets/js/jquery.scrollex.min.js"></script>
<script src="https://eddelbuettel.github.io/html5-story/assets/js/jquery.scrolly.min.js"></script>
<script src="https://eddelbuettel.github.io/html5-story/assets/js/browser.min.js"></script>
<script src="https://eddelbuettel.github.io/html5-story/assets/js/breakpoints.min.js"></script>
<script src="https://eddelbuettel.github.io/html5-story/assets/js/util.js"></script>
<script src="https://eddelbuettel.github.io/html5-story/assets/js/main.js"></script>

</body>
</html>